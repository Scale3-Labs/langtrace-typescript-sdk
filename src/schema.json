{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "LLM API Interaction Trace",
    "description": "Schema for tracing API interactions with Large Language Models",
    "type": "object",
    "properties": {
      "traceId": {
        "type": "string",
        "description": "Globally unique identifier for the trace"
      },
      "parentId": {
        "type": ["string", "null"],
        "description": "Identifier of the parent span, if any"
      },
      "traceState": {
        "type": ["string", "null"],
        "description": "Vendor-specific trace state"
      },
      "name": {
        "type": "string",
        "description": "Name of the operation being traced"
      },
      "id": {
        "type": "string",
        "description": "Unique identifier for the span"
      },
      "kind": {
        "type": "integer",
        "description": "Kind of span (e.g., internal, client, server)"
      },
      "timestamp": {
        "type": "integer",
        "description": "Start timestamp of the span"
      },
      "duration": {
        "type": "number",
        "description": "Duration of the operation in microseconds"
      },
      "attributes": {
        "type": "object",
        "properties": {
          "service_provider": {
            "type": "string",
            "description": "Identifier of the LLM service provider"
          },
          "api": {
            "type": "string",
            "description": "API endpoint being called"
          },
          "model": {
            "type": "string",
            "description": "Model being used for the request"
          },
          "prompt": {
            "type": "string",
            "description": "Input prompt to the LLM"
          },
          "baseURL": {
            "type": "string",
            "description": "Base URL of the LLM API"
          },
          "maxRetries": {
            "type": "integer",
            "description": "Maximum retry attempts for the request"
          },
          "timeout": {
            "type": "integer",
            "description": "Request timeout in milliseconds"
          },
          "request_type": {
            "type": "string",
            "enum": ["streaming", "non-stream"],
            "description": "Type of request (streaming or batch)"
          },
          "token_counts": {
            "type": "object",
            "properties": {
              "prompt_tokens": {
                "type": "integer",
                "description": "Number of tokens in the prompt"
              },
              "completion_tokens": {
                "type": "integer",
                "description": "Number of tokens in the completion"
              },
              "total_tokens": {
                "type": "integer",
                "description": "Total number of tokens"
              }
            },
            "required": ["prompt_tokens", "completion_tokens", "total_tokens"]
          },
          "response": {
            "type": "string",
            "description": "Response from the LLM"
          }
        },
        "required": ["service_provider", "api", "model", "prompt"]
      },
      "status": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "Status code of the operation"
          },
          "message": {
            "type": ["string", "null"],
            "description": "Status message or error description"
          }
        },
        "required": ["code"]
      },
      "events": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "description": "Name of the event"
            },
            "attributes": {
              "type": "object",
              "description": "Key-value pairs of event attributes"
            },
            "time": {
              "type": "array",
              "items": {
                "type": "integer"
              },
              "minItems": 2,
              "maxItems": 2,
              "description": "Timestamp of the event [seconds, nanoseconds]"
            },
            "droppedAttributesCount": {
              "type": "integer",
              "description": "Count of attributes that were dropped due to collection limits"
            }
          },
          "required": ["name", "time"]
        }
      }
    },
    "required": ["traceId", "name", "id", "timestamp", "duration", "attributes", "status"]
  }
  